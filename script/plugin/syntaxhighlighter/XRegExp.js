var XRegExp;if(XRegExp)throw Error("can't load XRegExp twice in the same frame");!function(){function a(a,c){if(!XRegExp.isRegExp(a))throw TypeError("type RegExp expected");var d=a._xregexp;return a=XRegExp(a.source,b(a)+(c||"")),d&&(a._xregexp={source:d.source,captureNames:d.captureNames?d.captureNames.slice(0):null}),a}function b(a){return(a.global?"g":"")+(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.extended?"x":"")+(a.sticky?"y":"")}function c(a,b,c,d){var e,f,g,j=i.length;h=!0;try{for(;j--;)if(g=i[j],c&g.scope&&(!g.trigger||g.trigger.call(d))&&(g.pattern.lastIndex=b,f=g.pattern.exec(a),f&&f.index===b)){e={output:g.handler.call(d,f,c),match:f};break}}catch(k){throw k}finally{h=!1}return e}function d(a,b,c){if(Array.prototype.indexOf)return a.indexOf(b,c);for(var d=c||0;d<a.length;d++)if(a[d]===b)return d;return-1}XRegExp=function(b,d){var e,g,i,k,l,m=[],n=XRegExp.OUTSIDE_CLASS,p=0;if(XRegExp.isRegExp(b)){if(void 0!==d)throw TypeError("can't supply flags when constructing one RegExp from another");return a(b)}if(h)throw Error("can't call the XRegExp constructor within token definition functions");for(d=d||"",e={hasNamedCapture:!1,captureNames:[],hasFlag:function(a){return d.indexOf(a)>-1},setFlag:function(a){d+=a}};p<b.length;)g=c(b,p,n,e),g?(m.push(g.output),p+=g.match[0].length||1):(i=j.exec.call(o[n],b.slice(p)))?(m.push(i[0]),p+=i[0].length):(k=b.charAt(p),"["===k?n=XRegExp.INSIDE_CLASS:"]"===k&&(n=XRegExp.OUTSIDE_CLASS),m.push(k),p++);return l=RegExp(m.join(""),j.replace.call(d,f,"")),l._xregexp={source:b,captureNames:e.hasNamedCapture?e.captureNames:null},l},XRegExp.version="1.5.0",XRegExp.INSIDE_CLASS=1,XRegExp.OUTSIDE_CLASS=2;var e=/\$(?:(\d\d?|[$&`'])|{([$\w]+)})/g,f=/[^gimy]+|([\s\S])(?=[\s\S]*\1)/g,g=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,h=!1,i=[],j={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},k=void 0===j.exec.call(/()??/,"")[1],l=function(){var a=/^/g;return j.test.call(a,""),!a.lastIndex}(),m=function(){var a=/x/g;return j.replace.call("x",a,""),!a.lastIndex}(),n=void 0!==RegExp.prototype.sticky,o={};o[XRegExp.INSIDE_CLASS]=/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/,o[XRegExp.OUTSIDE_CLASS]=/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/,XRegExp.addToken=function(b,c,d,e){i.push({pattern:a(b,"g"+(n?"y":"")),handler:c,scope:d||XRegExp.OUTSIDE_CLASS,trigger:e||null})},XRegExp.cache=function(a,b){var c=a+"/"+(b||"");return XRegExp.cache[c]||(XRegExp.cache[c]=XRegExp(a,b))},XRegExp.copyAsGlobal=function(b){return a(b,"g")},XRegExp.escape=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},XRegExp.execAt=function(b,c,d,e){c=a(c,"g"+(e&&n?"y":"")),c.lastIndex=d=d||0;var f=c.exec(b);return e?f&&f.index===d?f:null:f},XRegExp.freezeTokens=function(){XRegExp.addToken=function(){throw Error("can't run addToken after freezeTokens")}},XRegExp.isRegExp=function(a){return"[object RegExp]"===Object.prototype.toString.call(a)},XRegExp.iterate=function(b,c,d,e){for(var f,g=a(c,"g"),h=-1;f=g.exec(b);)d.call(e,f,++h,b,g),g.lastIndex===f.index&&g.lastIndex++;c.global&&(c.lastIndex=0)},XRegExp.matchChain=function(b,c){return function d(b,e){var f,g=c[e].regex?c[e]:{regex:c[e]},h=a(g.regex,"g"),i=[];for(f=0;f<b.length;f++)XRegExp.iterate(b[f],h,function(a){i.push(g.backref?a[g.backref]||"":a[0])});return e!==c.length-1&&i.length?d(i,e+1):i}([b],0)},RegExp.prototype.apply=function(a,b){return this.exec(b[0])},RegExp.prototype.call=function(a,b){return this.exec(b)},RegExp.prototype.exec=function(a){var c,e,f=j.exec.apply(this,arguments);if(f){if(!k&&f.length>1&&d(f,"")>-1&&(e=RegExp(this.source,j.replace.call(b(this),"g","")),j.replace.call(a.slice(f.index),e,function(){for(var a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(f[a]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var g=1;g<f.length;g++)c=this._xregexp.captureNames[g-1],c&&(f[c]=f[g]);!l&&this.global&&!f[0].length&&this.lastIndex>f.index&&this.lastIndex--}return f},l||(RegExp.prototype.test=function(a){var b=j.exec.call(this,a);return b&&this.global&&!b[0].length&&this.lastIndex>b.index&&this.lastIndex--,!!b}),String.prototype.match=function(a){if(XRegExp.isRegExp(a)||(a=RegExp(a)),a.global){var b=j.match.apply(this,arguments);return a.lastIndex=0,b}return a.exec(this)},String.prototype.replace=function(a,b){var c,f,g,h=XRegExp.isRegExp(a);return h&&"string"==typeof b.valueOf()&&-1===b.indexOf("${")&&m?j.replace.apply(this,arguments):(h?a._xregexp&&(c=a._xregexp.captureNames):a+="","function"==typeof b?f=j.replace.call(this,a,function(){if(c){arguments[0]=new String(arguments[0]);for(var d=0;d<c.length;d++)c[d]&&(arguments[0][c[d]]=arguments[d+1])}return h&&a.global&&(a.lastIndex=arguments[arguments.length-2]+arguments[0].length),b.apply(null,arguments)}):(g=this+"",f=j.replace.call(g,a,function(){var a=arguments;return j.replace.call(b,e,function(b,e,f){if(!e){var g=+f;return g<=a.length-3?a[g]:(g=c?d(c,f):-1,g>-1?a[g+1]:b)}switch(e){case"$":return"$";case"&":return a[0];case"`":return a[a.length-1].slice(0,a[a.length-2]);case"'":return a[a.length-1].slice(a[a.length-2]+a[0].length);default:var h="";if(e=+e,!e)return b;for(;e>a.length-3;)h=String.prototype.slice.call(e,-1)+h,e=Math.floor(e/10);return(e?a[e]||"":"$")+h}})})),h&&a.global&&(a.lastIndex=0),f)},String.prototype.split=function(a,b){if(!XRegExp.isRegExp(a))return j.split.apply(this,arguments);var c,d,e=this+"",f=[],g=0;if(void 0===b||0>+b)b=1/0;else if(b=Math.floor(+b),!b)return[];for(a=XRegExp.copyAsGlobal(a);(c=a.exec(e))&&!(a.lastIndex>g&&(f.push(e.slice(g,c.index)),c.length>1&&c.index<e.length&&Array.prototype.push.apply(f,c.slice(1)),d=c[0].length,g=a.lastIndex,f.length>=b));)a.lastIndex===c.index&&a.lastIndex++;return g===e.length?(!j.test.call(a,"")||d)&&f.push(""):f.push(e.slice(g)),f.length>b?f.slice(0,b):f},XRegExp.addToken(/\(\?#[^)]*\)/,function(a){return j.test.call(g,a.input.slice(a.index+a[0].length))?"":"(?:)"}),XRegExp.addToken(/\((?!\?)/,function(){return this.captureNames.push(null),"("}),XRegExp.addToken(/\(\?<([$\w]+)>/,function(a){return this.captureNames.push(a[1]),this.hasNamedCapture=!0,"("}),XRegExp.addToken(/\\k<([\w$]+)>/,function(a){var b=d(this.captureNames,a[1]);return b>-1?"\\"+(b+1)+(isNaN(a.input.charAt(a.index+a[0].length))?"":"(?:)"):a[0]}),XRegExp.addToken(/\[\^?]/,function(a){return"[]"===a[0]?"\\b\\B":"[\\s\\S]"}),XRegExp.addToken(/^\(\?([imsx]+)\)/,function(a){return this.setFlag(a[1]),""}),XRegExp.addToken(/(?:\s+|#.*)+/,function(a){return j.test.call(g,a.input.slice(a.index+a[0].length))?"":"(?:)"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("x")}),XRegExp.addToken(/\./,function(){return"[\\s\\S]"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("s")})}(),"undefined"!=typeof exports?exports.XRegExp=XRegExp:null;